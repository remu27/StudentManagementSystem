# 학생 성적 관리 시스템 - 파일 구성

## 프로젝트 디렉토리 구조

```
student_management_system/
├── main.c
├── student.h
├── student.c
├── grade.h
├── grade.c
├── file_handler.h
├── file_handler.c
├── utils.h
├── utils.c
├── Makefile
└── data.csv (프로그램 실행 중 생성)
```

---

## 각 파일의 역할 및 기본 구조

### 1. student.h (학생 정보 헤더)

```c
#ifndef STUDENT_H
#define STUDENT_H

#define MAX_STUDENTS 100
#define MAX_NAME_LEN 50
#define MAX_MAJOR_LEN 50
#define MAX_SUBJECTS 20

// 성적 정보 구조체
typedef struct {
    char subject_name[MAX_NAME_LEN];
    float score;
    char grade;  // A, B, C, D, F
    int credit;  // 학점
} Grade;

// 학생 정보 구조체
typedef struct {
    int student_id;
    char name[MAX_NAME_LEN];
    char major[MAX_MAJOR_LEN];
    Grade grades[MAX_SUBJECTS];
    int num_grades;
    float gpa;
} Student;

// 전체 학생 데이터 관리 구조체
typedef struct {
    Student students[MAX_STUDENTS];
    int num_students;
} StudentDB;

// 함수 선언
Student* create_student(int id, const char* name, const char* major);
void free_student(Student* student);
void add_grade_to_student(Student* student, const char* subject, float score, int credit);
void update_grade(Student* student, const char* subject, float score);
void delete_grade(Student* student, const char* subject);

#endif
```

### 2. student.c (학생 정보 구현)

```c
#include "student.h"
#include <string.h>
#include <stdlib.h>
#include <stdio.h>

// 새로운 학생 생성
Student* create_student(int id, const char* name, const char* major) {
    // 메모리 할당 및 초기화
    // 반환
}

// 학생 메모리 해제
void free_student(Student* student) {
    // 필요시 추가 정리 작업
}

// 학생에게 성적 추가
void add_grade_to_student(Student* student, const char* subject, float score, int credit) {
    // 성적 추가 로직
}

// 특정 과목 성적 수정
void update_grade(Student* student, const char* subject, float score) {
    // 성적 수정 로직
}

// 특정 과목 성적 삭제
void delete_grade(Student* student, const char* subject) {
    // 성적 삭제 로직
}
```

### 3. grade.h (성적 관리 헤더)

```c
#ifndef GRADE_H
#define GRADE_H

#include "student.h"

// 함수 선언
void calculate_gpa(Student* student);
char get_grade_letter(float score);
float get_credit_points(char grade);
void display_student_transcript(Student* student);
float calculate_weighted_average(Student* student);

#endif
```

### 4. grade.c (성적 관리 구현)

```c
#include "grade.h"
#include <stdio.h>
#include <string.h>

// 학생의 GPA 계산
void calculate_gpa(Student* student) {
    // GPA 계산 로직 (평균 또는 가중평균)
}

// 점수에 따른 등급 변환
char get_grade_letter(float score) {
    // A ~ F 등급 반환
}

// 등급에 따른 학점 반환
float get_credit_points(char grade) {
    // A=4.0, B=3.0, C=2.0, D=1.0, F=0.0
}

// 학생 성적표 출력
void display_student_transcript(Student* student) {
    // 학생 성적표 형식 출력
}

// 가중 평균 계산
float calculate_weighted_average(Student* student) {
    // (성적 * 학점) / 총 학점
}
```

### 5. file_handler.h (파일 I/O 헤더)

```c
#ifndef FILE_HANDLER_H
#define FILE_HANDLER_H

#include "student.h"

#define DATA_FILE "data.csv"

// 함수 선언
int load_data_from_file(StudentDB* db, const char* filename);
int save_data_to_file(StudentDB* db, const char* filename);
void create_sample_data(StudentDB* db);

#endif
```

### 6. file_handler.c (파일 I/O 구현)

```c
#include "file_handler.h"
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

// 파일에서 데이터 읽기
int load_data_from_file(StudentDB* db, const char* filename) {
    // CSV 파일에서 학생 정보 및 성적 읽기
    // 성공 시 1, 실패 시 0 반환
}

// 데이터를 파일에 저장
int save_data_to_file(StudentDB* db, const char* filename) {
    // 학생 정보 및 성적을 CSV 파일로 저장
    // 성공 시 1, 실패 시 0 반환
}

// 테스트용 샘플 데이터 생성
void create_sample_data(StudentDB* db) {
    // 몇 가지 학생 및 성적 데이터 추가
}
```

### 7. utils.h (유틸리티 함수 헤더)

```c
#ifndef UTILS_H
#define UTILS_H

#include "student.h"

// 함수 선언
Student* search_student_by_id(StudentDB* db, int student_id);
Student* search_student_by_name(StudentDB* db, const char* name);
void sort_by_id(StudentDB* db);
void sort_by_average(StudentDB* db);
void calculate_rankings(StudentDB* db);
void display_all_students(StudentDB* db);
void display_class_statistics(StudentDB* db);

#endif
```

### 8. utils.c (유틸리티 함수 구현)

```c
#include "utils.h"
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

// 학번으로 학생 검색
Student* search_student_by_id(StudentDB* db, int student_id) {
    // 선형 검색 구현
}

// 이름으로 학생 검색
Student* search_student_by_name(StudentDB* db, const char* name) {
    // 이름 기반 검색
}

// 학번순 정렬
void sort_by_id(StudentDB* db) {
    // qsort 또는 버블정렬 사용
}

// 평균 학점순 정렬 (내림차순)
void sort_by_average(StudentDB* db) {
    // qsort 또는 버블정렬 사용
}

// 순위 계산
void calculate_rankings(StudentDB* db) {
    // 평균 학점 기준으로 순위 계산
}

// 전체 학생 목록 출력
void display_all_students(StudentDB* db) {
    // 모든 학생 정보 테이블 형식 출력
}

// 반 전체 통계 출력
void display_class_statistics(StudentDB* db) {
    // 평균, 최고점, 최저점 등 계산 및 출력
}
```

### 9. main.c (메인 프로그램)

```c
#include "student.h"
#include "grade.h"
#include "file_handler.h"
#include "utils.h"
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

void display_main_menu();
void display_student_management_menu(StudentDB* db);
void display_grade_management_menu(StudentDB* db);
void display_inquiry_menu(StudentDB* db);
void display_file_management_menu(StudentDB* db);

int main() {
    StudentDB db;
    db.num_students = 0;
    
    int choice;
    int running = 1;
    
    // 프로그램 시작 시 데이터 로드 시도
    load_data_from_file(&db, DATA_FILE);
    
    while (running) {
        display_main_menu();
        printf("선택: ");
        scanf("%d", &choice);
        
        switch (choice) {
            case 1:  // 학생 관리
                display_student_management_menu(&db);
                break;
            case 2:  // 성적 관리
                display_grade_management_menu(&db);
                break;
            case 3:  // 조회 및 분석
                display_inquiry_menu(&db);
                break;
            case 4:  // 파일 관리
                display_file_management_menu(&db);
                break;
            case 5:  // 종료
                save_data_to_file(&db, DATA_FILE);
                running = 0;
                printf("프로그램을 종료합니다.\n");
                break;
            default:
                printf("잘못된 선택입니다.\n");
        }
    }
    
    return 0;
}

void display_main_menu() {
    printf("\n========== 학생 성적 관리 시스템 ==========\n");
    printf("1. 학생 관리\n");
    printf("2. 성적 관리\n");
    printf("3. 조회 및 분석\n");
    printf("4. 파일 관리\n");
    printf("5. 종료\n");
    printf("==========================================\n");
}

void display_student_management_menu(StudentDB* db) {
    // 학생 관리 메뉴 구현
}

void display_grade_management_menu(StudentDB* db) {
    // 성적 관리 메뉴 구현
}

void display_inquiry_menu(StudentDB* db) {
    // 조회 및 분석 메뉴 구현
}

void display_file_management_menu(StudentDB* db) {
    // 파일 관리 메뉴 구현
}
```

### 10. Makefile

```makefile
CC = gcc
CFLAGS = -Wall -Wextra -std=c99

TARGET = student_management

OBJECTS = main.o student.o grade.o file_handler.o utils.o

$(TARGET): $(OBJECTS)
	$(CC) $(CFLAGS) -o $(TARGET) $(OBJECTS)

main.o: main.c student.h grade.h file_handler.h utils.h
	$(CC) $(CFLAGS) -c main.c

student.o: student.c student.h
	$(CC) $(CFLAGS) -c student.c

grade.o: grade.c grade.h student.h
	$(CC) $(CFLAGS) -c grade.c

file_handler.o: file_handler.c file_handler.h student.h
	$(CC) $(CFLAGS) -c file_handler.c

utils.o: utils.c utils.h student.h
	$(CC) $(CFLAGS) -c utils.c

clean:
	rm -f $(OBJECTS) $(TARGET)

run: $(TARGET)
	./$(TARGET)

.PHONY: clean run
```

---

## 컴파일 및 실행 방법

### 방법 1: Makefile 사용 (권장)
```bash
make                # 컴파일
make run            # 컴파일 후 실행
make clean          # 객체 파일 및 실행 파일 제거
```

### 방법 2: 직접 컴파일
```bash
gcc -Wall -Wextra -std=c99 -o student_management main.c student.c grade.c file_handler.c utils.c
./student_management
```

---

## 구현 순서 추천

1. **student.h/c**: 기본 데이터 구조 정의
2. **grade.h/c**: 성적 계산 로직
3. **utils.h/c**: 정렬, 검색, 출력 함수
4. **file_handler.h/c**: 파일 I/O 구현
5. **main.c**: 메뉴 시스템 및 사용자 인터페이스

이 순서대로 진행하면 각 모듈이 독립적으로 테스트 가능하고, 점진적으로 완전한 시스템을 구축할 수 있습니다.
